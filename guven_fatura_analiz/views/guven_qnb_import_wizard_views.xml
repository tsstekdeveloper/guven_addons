<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- ============================================================ -->
        <!-- WIZARD FORM VIEW                                              -->
        <!-- ============================================================ -->
        <record id="guven_qnb_import_wizard_view_form" model="ir.ui.view">
            <field name="name">guven.qnb.import.wizard.form</field>
            <field name="model">guven.qnb.import.wizard</field>
            <field name="arch" type="xml">
                <form string="QNB Excel İçeri Al">
                    <field name="state" invisible="1"/>
                    <field name="company_id" invisible="1"/>

                    <!-- ===== DRAFT STATE ===== -->
                    <div invisible="state != 'draft'">
                        <div class="alert alert-warning mb-3" role="alert">
                            <strong>Dikkat:</strong>
                            Yüklenen dosyalardaki faturalar
                            <strong>
                                <field name="company_id" readonly="1"
                                       class="d-inline" style="display:inline;"/>
                            </strong>
                            (<field name="company_vat" readonly="1" class="d-inline"
                                    style="display:inline;"/>)
                            şirketine kaydedilecektir.
                            <br/>
                            <small>Her dosyada Sheet 0: E-Fatura (81 kolon), Sheet 1: E-Arşiv (74 kolon) beklenmektedir.</small>
                        </div>
                        <group>
                            <field name="file_ids" nolabel="1">
                                <list editable="bottom" create="1" delete="1">
                                    <field name="file_data" filename="file_name"/>
                                    <field name="file_name" column_invisible="1"/>
                                    <field name="efatura_count"/>
                                    <field name="earsiv_count"/>
                                    <field name="status"/>
                                </list>
                            </field>
                        </group>
                        <group>
                            <field name="auto_logo_sync"/>
                        </group>
                    </div>

                    <!-- ===== PREVIEW STATE ===== -->
                    <div invisible="state != 'preview'">
                        <div class="alert alert-info mb-3" role="status">
                            <strong>Ön İzleme Sonuçları</strong><br/>
                            E-Fatura: <field name="preview_efatura_total" readonly="1"
                                             class="d-inline" style="display:inline;"/> satır |
                            E-Arşiv: <field name="preview_earsiv_total" readonly="1"
                                            class="d-inline" style="display:inline;"/> satır
                            <br/>
                            Yeni: <field name="preview_new" readonly="1" class="d-inline"
                                         style="display:inline;"/> |
                            Güncelleme: <field name="preview_update" readonly="1" class="d-inline"
                                               style="display:inline;"/> |
                            Değişiklik yok: <field name="preview_unchanged" readonly="1" class="d-inline"
                                                    style="display:inline;"/> |
                            Atlanacak (kilitli): <field name="preview_skip" readonly="1"
                                                        class="d-inline"
                                                        style="display:inline;"/>
                        </div>
                        <group>
                            <field name="file_ids" nolabel="1" readonly="1">
                                <list>
                                    <field name="file_name"/>
                                    <field name="efatura_count"/>
                                    <field name="earsiv_count"/>
                                    <field name="status"/>
                                </list>
                            </field>
                        </group>
                    </div>

                    <!-- ===== DONE STATE ===== -->
                    <div invisible="state != 'done'">
                        <field name="import_summary" nolabel="1"/>
                    </div>

                    <footer>
                        <button string="Dosyaları Kontrol Et"
                                name="action_preview"
                                type="object"
                                class="btn-primary"
                                invisible="state != 'draft'"/>
                        <button string="İçeri Al"
                                name="action_import"
                                type="object"
                                class="btn-primary"
                                invisible="state != 'preview'"/>
                        <button string="Geri"
                                name="action_back"
                                type="object"
                                class="btn-secondary"
                                invisible="state != 'preview'"/>
                        <button string="Kapat"
                                name="action_close"
                                type="object"
                                class="btn-secondary"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- ============================================================ -->
        <!-- WIZARD ACTION                                                 -->
        <!-- ============================================================ -->
        <record id="action_guven_qnb_import_wizard" model="ir.actions.act_window">
            <field name="name">QNB Excel İçeri Al</field>
            <field name="res_model">guven.qnb.import.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

    </data>
</odoo>
